<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2021-02-17 Wed 19:22 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Pixie Specification - Version 1.0</title>
<meta name="generator" content="Org mode">
<meta name="author" content="Raghu Kaippully">
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="org-style.css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Pixie Specification - Version 1.0</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgdec80b9">1. Introduction</a></li>
<li><a href="#orge67698e">2. Instruction Set Architecture</a>
<ul>
<li><a href="#org19ef9a4">2.1. Notation</a></li>
<li><a href="#org04bc95f">2.2. Memory Address Space</a></li>
<li><a href="#orgfb943fb">2.3. Data Types</a></li>
<li><a href="#org67f855a">2.4. Endianness and Addressing</a></li>
<li><a href="#orge6c22ce">2.5. Modes of Operation</a></li>
<li><a href="#org6aa924a">2.6. Mode Switching</a></li>
<li><a href="#orga78e83c">2.7. Registers</a></li>
<li><a href="#orga244ae7">2.8. Memory Layout</a></li>
<li><a href="#orgfc38cc6">2.9. CPU Operation</a></li>
<li><a href="#org24deb5d">2.10. Input and Output</a></li>
<li><a href="#org48f6ad1">2.11. System Calls</a></li>
<li><a href="#org82e9792">2.12. Initialization</a></li>
<li><a href="#org97236de">2.13. Instruction Format</a></li>
</ul>
</li>
<li><a href="#org3c7c6aa">3. Instructions</a>
<ul>
<li><a href="#org5d8d54b">3.1. ADD</a></li>
<li><a href="#orgbe45737">3.2. SUB</a></li>
<li><a href="#org08c1226">3.3. MUL</a></li>
<li><a href="#org1a52fdc">3.4. NEG</a></li>
<li><a href="#orga6dc16f">3.5. CMP</a></li>
<li><a href="#orgd1f456e">3.6. AND</a></li>
<li><a href="#org72c3231">3.7. OR</a></li>
<li><a href="#org4661fac">3.8. NOT</a></li>
<li><a href="#org716eedc">3.9. XOR</a></li>
<li><a href="#org6d7d6d9">3.10. SHF</a></li>
<li><a href="#org080f87e">3.11. JC</a></li>
<li><a href="#org2e07f6f">3.12. JMP</a></li>
<li><a href="#org53c2179">3.13. CALL</a></li>
<li><a href="#org961ea00">3.14. SCL</a></li>
<li><a href="#org6e98e8f">3.15. RET</a></li>
<li><a href="#orga8e91ea">3.16. LD</a></li>
<li><a href="#orga98a2c7">3.17. ST</a></li>
<li><a href="#org9356010">3.18. CPY</a></li>
<li><a href="#orgef010e0">3.19. PUSH</a></li>
<li><a href="#org01c0feb">3.20. POP</a></li>
<li><a href="#orgaccaf4a">3.21. IN</a></li>
<li><a href="#orgba169d5">3.22. OUT</a></li>
<li><a href="#org538f9c3">3.23. SSSP</a></li>
<li><a href="#orgdff880f">3.24. HALT</a></li>
</ul>
</li>
<li><a href="#org32901b9">4. Standard I/O Devices</a>
<ul>
<li><a href="#org7f0538d">4.1. Clock</a></li>
<li><a href="#orge871ea4">4.2. Character Input</a></li>
<li><a href="#org95377ef">4.3. Character Output</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgdec80b9" class="outline-2">
<h2 id="orgdec80b9"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
Pixie is an abstract computer. This document describes the features
and architecture of Pixie.
</p>
</div>
</div>

<div id="outline-container-orge67698e" class="outline-2">
<h2 id="orge67698e"><span class="section-number-2">2</span> Instruction Set Architecture</h2>
<div class="outline-text-2" id="text-2">
<p>
The following sections define the instruction set architecture of
Pixie.
</p>
</div>

<div id="outline-container-org19ef9a4" class="outline-3">
<h3 id="org19ef9a4"><span class="section-number-3">2.1</span> Notation</h3>
<div class="outline-text-3" id="text-2-1">
<p>
The notation defined in this section will be used throughout this
document.
</p>

<table>
<caption class="t-above"><span class="table-number">Table 1:</span> Notation</caption>

<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Notation</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>X[l:r]</code></td>
<td class="org-left">The field delimited by bit <code>l</code> on the left and <code>r</code> on the right (both inclusive) of the element <code>X</code>.</td>
</tr>

<tr>
<td class="org-left"><code>X[b]</code></td>
<td class="org-left">Same as <code>X[b:b]</code>.</td>
</tr>

<tr>
<td class="org-left"><code>MemB[addr]</code></td>
<td class="org-left">Refers to the 8-bit memory location at address <code>addr</code>.</td>
</tr>

<tr>
<td class="org-left"><code>MemS[addr]</code></td>
<td class="org-left">Refers to the 16-bit memory location at address <code>addr</code>.</td>
</tr>

<tr>
<td class="org-left"><code>MemW[addr]</code></td>
<td class="org-left">Refers to the 32-bit memory location at address <code>addr</code>.</td>
</tr>

<tr>
<td class="org-left"><code>Port[p]</code></td>
<td class="org-left">Refers to the contents of I/O port numbered <code>p</code>.</td>
</tr>

<tr>
<td class="org-left"><code>LShift(X, n)</code></td>
<td class="org-left">Shift <code>X</code> to the left by <code>n</code> bits and zero-fill the vacated bit positions.</td>
</tr>

<tr>
<td class="org-left"><code>RShift(X, n)</code></td>
<td class="org-left">Shift <code>X</code> to the right by <code>n</code> bits and zero-fill the vacated bit positions.</td>
</tr>

<tr>
<td class="org-left"><code>RAShift(X, n)</code></td>
<td class="org-left">Shift <code>X</code> to the right by <code>n</code> bits. Sign-extend the vacated bit positions.</td>
</tr>

<tr>
<td class="org-left"><code>ZExtend(X, n)</code></td>
<td class="org-left">Zeroes are appended to the left of <code>X</code> to make it <code>n</code> bits wide.</td>
</tr>

<tr>
<td class="org-left"><code>SExtend(X, n)</code></td>
<td class="org-left">Replicate the most significant bit of X as many times as necessary to make it <code>n</code> bits wide.</td>
</tr>

<tr>
<td class="org-left"><code>SCT[n]</code></td>
<td class="org-left">The n<sup>th</sup> entry in the system call table.</td>
</tr>

<tr>
<td class="org-left"><code>Set_Flags(X)</code></td>
<td class="org-left">Update <code>ZF</code>, <code>PF</code>, and <code>NF</code> according to the value <code>X</code>.</td>
</tr>

<tr>
<td class="org-left"><code>Next_Reg(n)</code></td>
<td class="org-left">The general purpose register numbered <code>(n + 1) modulo 8</code>.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org04bc95f" class="outline-3">
<h3 id="org04bc95f"><span class="section-number-3">2.2</span> Memory Address Space</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Pixie can address 2<sup>20</sup> memory locations each containing a
byte. Addresses are numbered from <code>0x00000</code> to <code>0xfffff</code>. Some regions
of memory are reserved for special uses as mentioned in <a href="#orga244ae7">Memory Layout</a>.
</p>
</div>
</div>

<div id="outline-container-orgfb943fb" class="outline-3">
<h3 id="orgfb943fb"><span class="section-number-3">2.3</span> Data Types</h3>
<div class="outline-text-3" id="text-2-3">
<p>
The basic data types of Pixie are bytes (8 bits), shorts (16 bits),
words (32 bits), and doublewords (64 bits). A byte can be located at
any memory location. Shorts, words, and doublewords must be aligned in
memory at natural boundaries. That is, a short must be located at an
even-numbered address, a word must be located at an address divisible
by four, and a doubleword must be located at an address divisible by
eight. Unaligned memory accesses will result in an error that will be
handled in an implementation-defined manner.
</p>

<p>
Some instructions interpret these basic data types as signed and
unsigned integers or addresses.
</p>
</div>
</div>

<div id="outline-container-org67f855a" class="outline-3">
<h3 id="org67f855a"><span class="section-number-3">2.4</span> Endianness and Addressing</h3>
<div class="outline-text-3" id="text-2-4">
<p>
Bits of a memory location are arranged from right to left such that
the least significant bit is in the rightmost position and most
significant bit is in the leftmost position.
</p>

<p>
Shorts and words are stored in memory such that the least significant
byte is stored at the smallest memory address. The address of a short
or word is the address of its least significant byte.
</p>
</div>
</div>

<div id="outline-container-orge6c22ce" class="outline-3">
<h3 id="orge6c22ce"><span class="section-number-3">2.5</span> Modes of Operation</h3>
<div class="outline-text-3" id="text-2-5">
<p>
At any point of time, Pixie operates in one of the two modes - user
mode or supervisor mode. The user mode is used to run normal programs
while the supervisor mode is used by the operating system and
interrupt handlers. Certain privileged instructions are only allowed
in the supervisor mode.
</p>

<p>
The current mode is indicated by the <a href="#org17e884b">Mode Indicator Bit</a> in the machine
status register. This bit can only be changed using a <a href="#org6aa924a">mode switching
operation</a>.
</p>
</div>
</div>

<div id="outline-container-org6aa924a" class="outline-3">
<h3 id="org6aa924a"><span class="section-number-3">2.6</span> Mode Switching</h3>
<div class="outline-text-3" id="text-2-6">
<p>
The processor switches from user mode to supervisor mode on any of the
following conditions:
</p>

<ul class="org-ul">
<li>When an interrupt is serviced as described in <a href="#org3492027">Interrupt Handling</a> section.</li>
<li>When the processor executes the <a href="#org961ea00">SCL</a> instruction.</li>
</ul>

<p>
The processor switches from supervisor mode to user mode on any of the
following conditions:
</p>

<ul class="org-ul">
<li>When the processor executes the <a href="#org6e98e8f">RETI</a> instruction and the <a href="#org17e884b">Mode
Indicator</a> bit in the machine status register image in the stack is
clear.</li>
<li>When the processor executes the <a href="#org6e98e8f">RETS</a> instruction.</li>
</ul>
</div>
</div>

<div id="outline-container-orga78e83c" class="outline-3">
<h3 id="orga78e83c"><span class="section-number-3">2.7</span> Registers</h3>
<div class="outline-text-3" id="text-2-7">
</div>
<div id="outline-container-org31bca20" class="outline-4">
<h4 id="org31bca20"><span class="section-number-4">2.7.1</span> General Purpose Registers</h4>
<div class="outline-text-4" id="text-2-7-1">
<p>
There are sixteen 32-bit general purpose registers numbered from 0
to 15. The assembly instructions refer to these registers as <code>R0</code> to
<code>R15</code> respectively.
</p>
</div>
</div>

<div id="outline-container-org606b1c1" class="outline-4">
<h4 id="org606b1c1"><span class="section-number-4">2.7.2</span> Stack Pointer</h4>
<div class="outline-text-4" id="text-2-7-2">
<p>
The general purpose register <code>R15</code> is used as a stack pointer by some
instructions.
</p>
</div>
</div>

<div id="outline-container-orgd1b4342" class="outline-4">
<h4 id="orgd1b4342"><span class="section-number-4">2.7.3</span> Program Counter Register</h4>
<div class="outline-text-4" id="text-2-7-3">
<p>
There is a 20-bit program counter register - named <code>PC</code> - that
contains the address of the next instruction to be processed. The
address stored in this register must be word aligned.
</p>
</div>
</div>

<div id="outline-container-org17e884b" class="outline-4">
<h4 id="org17e884b"><span class="section-number-4">2.7.4</span> Machine Status Register</h4>
<div class="outline-text-4" id="text-2-7-4">
<p>
There is an 32-bit machine status register - named <code>MS</code> - that
contains various flags to indicate the status of the processor. The
flags are:
</p>

<table>
<caption class="t-above"><span class="table-number">Table 2:</span> Machine Status Register</caption>

<colgroup>
<col  class="org-right">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Bit Position</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">0</td>
<td class="org-left">Zero Flag (<code>ZF</code>). This bit is set when the result of an operation is zero.</td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-left">Positive Flag (<code>PF</code>). This bit is set when result of an operation is positive.</td>
</tr>

<tr>
<td class="org-right">2</td>
<td class="org-left">Negative Flag (<code>NF</code>). This bit is set when result of an operation is negative.</td>
</tr>

<tr>
<td class="org-right">3-15</td>
<td class="org-left">Reserved.</td>
</tr>

<tr>
<td class="org-right">16</td>
<td class="org-left">Mode Indicator (<code>MI</code>). This bit is set when the processor is in supervisor mode.</td>
</tr>

<tr>
<td class="org-right">17-31</td>
<td class="org-left">Reserved.</td>
</tr>
</tbody>
</table>

<p>
The machine status register cannot be loaded or stored directly by
instructions but accessed only indirectly.
</p>
</div>
</div>

<div id="outline-container-orga02bd71" class="outline-4">
<h4 id="orga02bd71"><span class="section-number-4">2.7.5</span> Supervisor Stack Pointer Register</h4>
<div class="outline-text-4" id="text-2-7-5">
<p>
There is a 20-bit supervisor stack pointer register - named <code>SSP</code> - that
contains the address of a stack to be used in supervisor mode.
</p>
</div>
</div>
</div>

<div id="outline-container-orga244ae7" class="outline-3">
<h3 id="orga244ae7"><span class="section-number-3">2.8</span> Memory Layout</h3>
<div class="outline-text-3" id="text-2-8">
<p>
Memory address space of Pixie is classified as shown below.
</p>

<table>
<caption class="t-above"><span class="table-number">Table 3:</span> Memory Layout</caption>

<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Start Address</th>
<th scope="col" class="org-left">End Address</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>0x00000</code></td>
<td class="org-left"><code>0x000ff</code></td>
<td class="org-left"><a href="#orge3cf95e">Interrupt Vector Table (IVT)</a></td>
</tr>

<tr>
<td class="org-left"><code>0x00100</code></td>
<td class="org-left"><code>0x001ff</code></td>
<td class="org-left"><a href="#orgfecb37a">System Call Table (SCT)</a></td>
</tr>

<tr>
<td class="org-left"><code>0x00200</code></td>
<td class="org-left"><code>0x07fff</code></td>
<td class="org-left">Operating System</td>
</tr>

<tr>
<td class="org-left"><code>0x08000</code></td>
<td class="org-left"><code>0xfffff</code></td>
<td class="org-left">Available for user programs</td>
</tr>
</tbody>
</table>

<p>
Memory addresses below <code>0x08000</code> are called protected address
space. It is and error to access the protected address space while in
user mode and such accesses will be handled in an
implementation-defined manner.
</p>
</div>
</div>

<div id="outline-container-orgfc38cc6" class="outline-3">
<h3 id="orgfc38cc6"><span class="section-number-3">2.9</span> CPU Operation</h3>
<div class="outline-text-3" id="text-2-9">
<p>
Much like any conventional CPU, Pixie executes programs by executing
instructions in an instruction cycle. Each cycle consists of the
following steps in order:
</p>

<ol class="org-ol">
<li>Handle any pending interrupts as mentioned in <a href="#org3492027">Interrupt Handling</a>
section.</li>
<li>Fetch the instruction addressed by the program counter register.</li>
<li>Increment program counter register by 4.</li>
<li>Decode the instruction. Any indirect memory contents required by
the instruction are fetched during this step.</li>
<li>Execute the instruction.</li>
</ol>
</div>
</div>

<div id="outline-container-org24deb5d" class="outline-3">
<h3 id="org24deb5d"><span class="section-number-3">2.10</span> Input and Output</h3>
<div class="outline-text-3" id="text-2-10">
</div>
<div id="outline-container-org68e10e3" class="outline-4">
<h4 id="org68e10e3"><span class="section-number-4">2.10.1</span> I/O Address Space</h4>
<div class="outline-text-4" id="text-2-10-1">
<p>
The I/O address space consists of 64 independently addressable 32-bit
ports. These ports are numbered from <code>0</code> to <code>63</code>. The I/O address
space is separate from the memory address space. It can only be
accessed by privileged instructions executed in supervisor mode.
</p>
</div>
</div>

<div id="outline-container-org3492027" class="outline-4">
<h4 id="org3492027"><span class="section-number-4">2.10.2</span> Interrupt Handling</h4>
<div class="outline-text-4" id="text-2-10-2">
<p>
An interrupt is an asynchronous event triggered by an I/O device. An
interrupt is identified with a number, called an <i>interrupt
vector</i>. Pixie supports 64 interrupt vectors numbered from <code>0</code> to
<code>63</code>.
</p>

<p>
The processor checks for pending interrupts before beginning execution
of every instruction. If an interrupt is pending, the processor
performs the following operations to service the interrupt:
</p>

<ol class="org-ol">
<li>Check <a href="#orge3cf95e">IVT</a> entry corresponding to the interrupt vector. If the entry
indicates that the interrupt is disabled, no further processing is
done. Otherwise, the following steps are performed.</li>
<li>If the processor is in user mode, load <code>ZExtend(SSP, 32)</code> to <code>R15</code>
and push the old value of <code>R15</code> to this new stack.</li>
<li>Push <code>MS</code> and <code>PC</code> to the stack in that order.</li>
<li>The <a href="#org17e884b">Mode Indicator</a> bit in the machine status register is set to
indicate that the processor is now executing in supervisor mode.</li>
<li>Load the address of the interrupt handler routine from the IVT
entry to <code>PC</code>.</li>
<li>Processor begins execution of the interrupt handler routine.</li>
</ol>

<p>
The interrupt handler routine can execute the <a href="#org6e98e8f">RETI</a> instruction to
transfer the control back to the point where the interrupt occurred.
</p>
</div>
</div>

<div id="outline-container-orge3cf95e" class="outline-4">
<h4 id="orge3cf95e"><span class="section-number-4">2.10.3</span> Interrupt Vector Table</h4>
<div class="outline-text-4" id="text-2-10-3">
<p>
The interrupt vector table (IVT) is a data structure located at memory
address <code>0x00000</code>. It is an array of 64 elements corresponding to each
of the interrupt vectors. Each element of IVT is word sized and has
the following structure:
</p>

<table>
<caption class="t-above"><span class="table-number">Table 4:</span> IVT Entry Format</caption>

<colgroup>
<col  class="org-right">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Bit Position</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">0-19</td>
<td class="org-left">Address of the interrupt handler routine</td>
</tr>

<tr>
<td class="org-right">20-30</td>
<td class="org-left">Reserved. Must be set to zero by the operating system.</td>
</tr>

<tr>
<td class="org-right">31</td>
<td class="org-left">Interrupt Enable Bit. The interrupt is ignored if this bit clear.</td>
</tr>
</tbody>
</table>

<p>
The operating system is responsible for populating entries in this
table during initialization.
</p>
</div>
</div>
</div>

<div id="outline-container-org48f6ad1" class="outline-3">
<h3 id="org48f6ad1"><span class="section-number-3">2.11</span> System Calls</h3>
<div class="outline-text-3" id="text-2-11">
<p>
User mode programs can invoke services provided by the operating
system using the <a href="#org961ea00">SCL</a> instruction. This instruction provides a
protected way of transferring control from user mode to supervisor
mode.
</p>

<p>
A system call is identified by a number called the <i>system call
vector</i>. A total of 64 system call vectors are supported numbered from
<code>0</code> to <code>63</code>.
</p>

<p>
Upon encountering the SCL instruction, the processor performs the
following steps:
</p>

<ol class="org-ol">
<li>Check the <a href="#orgfecb37a">SCT</a> entry corresponding to the system call
vector. Disabled entries will result in an error which will be
handled in an implementation-defined manner.</li>
<li>Load <code>ZExtend(SSP, 32)</code> to <code>R15</code> and push the old value of <code>R15</code> in
this new stack.</li>
<li>Push <code>MS</code> and <code>PC</code> to the stack in that order.</li>
<li>The <a href="#org17e884b">Mode Indicator</a> bit in the machine status register is set to
indicate that the processor is now executing in supervisor mode.</li>
<li>Load the address of the system call handler routine from the SCT
entry to <code>PC</code>.</li>
<li>Processor begins execution of the system call handler routine.</li>
</ol>

<p>
Additional parameters can be passed to the system call handler routine
in the general purpose registers or user mode stack.
</p>

<p>
The system call handler routine can return to user mode by executing
the <a href="#org6e98e8f">RETS</a> instruction. Results can be passed to user mode caller in the
general purpose registers or user mode stack.
</p>
</div>

<div id="outline-container-orgfecb37a" class="outline-4">
<h4 id="orgfecb37a"><span class="section-number-4">2.11.1</span> System Call Table</h4>
<div class="outline-text-4" id="text-2-11-1">
<p>
The system call table (SCT) is a data structure located at memory
address <code>0x00100</code>. It is an array of 64 elements corresponding to each
of the system call vectors. Each element of SCT is word sized and has
the following structure:
</p>

<table>
<caption class="t-above"><span class="table-number">Table 5:</span> SCT Entry Format</caption>

<colgroup>
<col  class="org-right">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Bit Position</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">0-19</td>
<td class="org-left">Address of the system call handler routine</td>
</tr>

<tr>
<td class="org-right">20-30</td>
<td class="org-left">Reserved. Must be set to zero by the operating system.</td>
</tr>

<tr>
<td class="org-right">31</td>
<td class="org-left">System Call Enable Bit. The system call fails if this bit is clear.</td>
</tr>
</tbody>
</table>

<p>
The operating system is responsible for populating entries in this
table during initialization.
</p>
</div>
</div>
</div>

<div id="outline-container-org82e9792" class="outline-3">
<h3 id="org82e9792"><span class="section-number-3">2.12</span> Initialization</h3>
<div class="outline-text-3" id="text-2-12">
<p>
During start up, Pixie is initialized to the following state:
</p>

<table>
<caption class="t-above"><span class="table-number">Table 6:</span> System Initial State</caption>

<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Element</th>
<th scope="col" class="org-left">Initial State</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">General Purpose Registers</td>
<td class="org-left"><code>0x00000000</code></td>
</tr>

<tr>
<td class="org-left">Program Counter Register</td>
<td class="org-left"><code>0x00200</code></td>
</tr>

<tr>
<td class="org-left">Machine Status Register</td>
<td class="org-left"><code>0x00010001</code></td>
</tr>

<tr>
<td class="org-left">Supervisor Stack Pointer Register</td>
<td class="org-left"><code>0x00000</code></td>
</tr>

<tr>
<td class="org-left">IVT</td>
<td class="org-left">All entries are set to <code>0x00000000</code>.</td>
</tr>

<tr>
<td class="org-left">SCT</td>
<td class="org-left">All entries are set to <code>0x00000000</code>.</td>
</tr>

<tr>
<td class="org-left">Memory</td>
<td class="org-left">Contents of memory locations other than IVT and SCT are undefined.</td>
</tr>
</tbody>
</table>

<p>
An implementation of Pixie may load an operating system and user
program(s) into memory during startup in an implementation-defined
manner.
</p>
</div>
</div>

<div id="outline-container-org97236de" class="outline-3">
<h3 id="org97236de"><span class="section-number-3">2.13</span> Instruction Format</h3>
<div class="outline-text-3" id="text-2-13">
<p>
An instruction is comprises of an opcode, an optional destination
operand, zero to two source operands written in that order.
</p>

<p>
The operands are classified into different categories mentioned below.
</p>
</div>

<div id="outline-container-orga8d8173" class="outline-4">
<h4 id="orga8d8173"><span class="section-number-4">2.13.1</span> Register Operands</h4>
<div class="outline-text-4" id="text-2-13-1">
<p>
These operands are located in a general purpose register. They are
denoted as <code>SR</code> and <code>DR</code> in the instructions. They are encoded by
their 4 bit register numbers.
</p>
</div>
</div>

<div id="outline-container-org7368e0c" class="outline-4">
<h4 id="org7368e0c"><span class="section-number-4">2.13.2</span> Immediate Operands</h4>
<div class="outline-text-4" id="text-2-13-2">
<p>
These operands are located in the instruction itself. They are denoted
as <code>imm5</code> and <code>imm16</code> in the instructions and have lengths of 5 and 16
bits respectively. They are encoded by 5 bit or 16 bit numbers
respectively.
</p>
</div>
</div>

<div id="outline-container-org8c375b1" class="outline-4">
<h4 id="org8c375b1"><span class="section-number-4">2.13.3</span> Absolute Address Operands</h4>
<div class="outline-text-4" id="text-2-13-3">
<p>
These operands are memory addressed located in the instruction
itself. They are denoted as <code>addr20</code> in the instructions and have a
length of 20 bits. They are encoded as a 20 bit number.
</p>
</div>
</div>

<div id="outline-container-orgfc3605c" class="outline-4">
<h4 id="orgfc3605c"><span class="section-number-4">2.13.4</span> Indirect</h4>
<div class="outline-text-4" id="text-2-13-4">
<p>
These operands are located in a memory location whose address is
located in a general purpose register. They are denoted as <code>[SR]</code> and
<code>[DR]</code> in the instructions. They are encoded by their 4 bit register
numbers.
</p>
</div>
</div>

<div id="outline-container-org712f5f5" class="outline-4">
<h4 id="org712f5f5"><span class="section-number-4">2.13.5</span> Register or Indirect</h4>
<div class="outline-text-4" id="text-2-13-5">
<p>
These operands are either located in a general purpose register or in
a memory location whose address is located in a general purpose
register. They are denoted as <code>SO</code>, <code>SO1</code>, <code>SO2</code>, and <code>DO</code> in the
instructions. They are encoded by a 5 bit number whose least
significant 4 bits are the register number and the most significant
bit is set if and only if the operand is located in memory.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org3c7c6aa" class="outline-2">
<h2 id="org3c7c6aa"><span class="section-number-2">3</span> Instructions</h2>
<div class="outline-text-2" id="text-3">
<p>
This section contains a comprehencive list of all instructions and
their encodings.
</p>

<p>
Many instruction encodings contain bit fields marked as
<i>Reserved</i>. These must be filled with zeroes for compatibility
reasons.
</p>
</div>

<div id="outline-container-org5d8d54b" class="outline-3">
<h3 id="org5d8d54b"><span class="section-number-3">3.1</span> ADD</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Adds two source operands and stores the result in the destination
operand.
</p>
</div>

<div id="outline-container-org9dc51bb" class="outline-4">
<h4 id="org9dc51bb"><span class="section-number-4">3.1.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-1-1">
<table>
<caption class="t-above"><span class="table-number">Table 7:</span> <code>ADD DO, SO1, SO2</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-22</th>
<th scope="col" class="org-right">21-17</th>
<th scope="col" class="org-right">16</th>
<th scope="col" class="org-right">15-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b00100</code></td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>SO1</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>SO2</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 8:</span> <code>ADD DO, SO1, imm16</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-22</th>
<th scope="col" class="org-right">21-17</th>
<th scope="col" class="org-right">16</th>
<th scope="col" class="org-right">15-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b00100</code></td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>SO1</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right"><code>imm16</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org0118b97" class="outline-4">
<h4 id="org0118b97"><span class="section-number-4">3.1.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-1-2">
<pre class="example">
if (instruction[16] == 0)
  DO = SO1 + SO2;
else
  DO = SO1 + SExtend(imm16, 32);

Set_Flags(DO);
</pre>
</div>
</div>

<div id="outline-container-org5af6955" class="outline-4">
<h4 id="org5af6955"><span class="section-number-4">3.1.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-1-3">
<p>
<code>ZF</code>, <code>PF</code>, <code>NF</code>
</p>
</div>
</div>
</div>

<div id="outline-container-orgbe45737" class="outline-3">
<h3 id="orgbe45737"><span class="section-number-3">3.2</span> SUB</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Subtracts the second source operand from the first source operand and
stores the result in the destination operand.
</p>
</div>

<div id="outline-container-org0f25f62" class="outline-4">
<h4 id="org0f25f62"><span class="section-number-4">3.2.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-2-1">
<table>
<caption class="t-above"><span class="table-number">Table 9:</span> <code>SUB DO, SO1, SO2</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-22</th>
<th scope="col" class="org-right">21-17</th>
<th scope="col" class="org-right">16</th>
<th scope="col" class="org-right">15-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b00000</code></td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>SO1</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>SO2</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 10:</span> <code>SUB DO, SO1, imm16</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-22</th>
<th scope="col" class="org-right">21-17</th>
<th scope="col" class="org-right">16</th>
<th scope="col" class="org-right">15-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b00000</code></td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>SO1</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right"><code>imm16</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org147730b" class="outline-4">
<h4 id="org147730b"><span class="section-number-4">3.2.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-2-2">
<pre class="example">
if (instruction[16] == 0)
  DO = SO1 - SO2;
else
  DO = SO1 - SExtend(imm16, 32);

Set_Flags(DO);
</pre>
</div>
</div>

<div id="outline-container-orgc7809c7" class="outline-4">
<h4 id="orgc7809c7"><span class="section-number-4">3.2.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-2-3">
<p>
<code>ZF</code>, <code>PF</code>, <code>NF</code>
</p>
</div>
</div>
</div>

<div id="outline-container-org08c1226" class="outline-3">
<h3 id="org08c1226"><span class="section-number-3">3.3</span> MUL</h3>
<div class="outline-text-3" id="text-3-3">
<p>
Multiples two source operands and stores the result in the destination
operand. The size of the destination operand is always double that of
the source operands.
</p>

<p>
The <code>IMUL</code> instruction variant multiplies two signed numbers and
stores the result into the destination operand. The <code>UMUL</code> instruction
variant multiplies two unsigned numbers and stores the result into the
destination operand.
</p>

<p>
Both these instruction variants are further classified into byte,
short, and word variants.
</p>

<p>
The byte instruction variant multiplies the least significant 8 bits of
the source operands and stores the result into the least significant
16 bits of the destination operand.
</p>

<p>
The short instruction variant multiplies the least significant 16 bits
of the source operands and stores the result into the destination
operand word.
</p>

<p>
The word instruction variant multiplies the source operand words and
stores the result into the destination operand doubleword. If the
destination operand is a register <code>DR</code>, the least significant word of
the result is stored in the register <code>DR</code> and the most significant
word in the register <code>(DR + 1) modulo 8</code>.
</p>
</div>

<div id="outline-container-org2d2bc9c" class="outline-4">
<h4 id="org2d2bc9c"><span class="section-number-4">3.3.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-3-1">
<table>
<caption class="t-above"><span class="table-number">Table 11:</span> <code>IMULB DO, SO1, SO2</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-24</th>
<th scope="col" class="org-right">23-15</th>
<th scope="col" class="org-right">14-10</th>
<th scope="col" class="org-right">9-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b01111</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>0b01</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>SO1</code></td>
<td class="org-right"><code>SO2</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 12:</span> <code>IMULS DO, SO1, SO2</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-24</th>
<th scope="col" class="org-right">23-15</th>
<th scope="col" class="org-right">14-10</th>
<th scope="col" class="org-right">9-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b01111</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>0b10</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>SO1</code></td>
<td class="org-right"><code>SO2</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 13:</span> <code>IMULW DO, SO1, SO2</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-24</th>
<th scope="col" class="org-right">23-15</th>
<th scope="col" class="org-right">14-10</th>
<th scope="col" class="org-right">9-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b01111</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>0b11</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>SO1</code></td>
<td class="org-right"><code>SO2</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 14:</span> <code>UMULB DO, SO1, SO2</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-24</th>
<th scope="col" class="org-right">23-15</th>
<th scope="col" class="org-right">14-10</th>
<th scope="col" class="org-right">9-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b01111</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right"><code>0b01</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>SO1</code></td>
<td class="org-right"><code>SO2</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 15:</span> <code>UMULS DO, SO1, SO2</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-24</th>
<th scope="col" class="org-right">23-15</th>
<th scope="col" class="org-right">14-10</th>
<th scope="col" class="org-right">9-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b01111</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right"><code>0b10</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>SO1</code></td>
<td class="org-right"><code>SO2</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 16:</span> <code>UMULW DO, SO1, SO2</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-24</th>
<th scope="col" class="org-right">23-15</th>
<th scope="col" class="org-right">14-10</th>
<th scope="col" class="org-right">9-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b01111</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right"><code>0b11</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>SO1</code></td>
<td class="org-right"><code>SO2</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orga1c3857" class="outline-4">
<h4 id="orga1c3857"><span class="section-number-4">3.3.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-3-2">
<pre class="example">
if (instruction[25:24] == 1) {
  op1 = SO1[7:0];
  op2 = SO2[7:0];
} else if (instruction[25:24] == 2) {
  op1 = SO1[15:0];
  op2 = SO2[15:0];
} else if (instruction[25:24] == 3) {
  op1 = SO1;
  op2 = SO2;
}

if (instruction[26] == 0)
  result = Signed_Multiply(op1, op2);
else
  result = Unsigned_Multiply(op1, op2);

if (instruction[25:24] == 1)
  DO[15:0] = result;
else if (instruction[25:24] == 2)
  DO = result;
else if (instruction[25:24] == 3) {
  if (instruction[4] == 0) {
    DO = result[31:0];
    Next_Reg(DO) = result[63:32];
  } else
    DO = result;
}

Set_Flags(result);
</pre>
</div>
</div>

<div id="outline-container-orge070cd6" class="outline-4">
<h4 id="orge070cd6"><span class="section-number-4">3.3.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-3-3">
<p>
<code>ZF</code>, <code>PF</code>, <code>NF</code>
</p>
</div>
</div>
</div>

<div id="outline-container-org1a52fdc" class="outline-3">
<h3 id="org1a52fdc"><span class="section-number-3">3.4</span> NEG</h3>
<div class="outline-text-3" id="text-3-4">
<p>
Two's complement negation.
</p>

<p>
Sets the destination operand to the two's complement of the source operand.
</p>
</div>

<div id="outline-container-org91f7746" class="outline-4">
<h4 id="org91f7746"><span class="section-number-4">3.4.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-4-1">
<table>
<caption class="t-above"><span class="table-number">Table 17:</span> <code>NEG DO, addr20</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b11000</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>addr20</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 18:</span> <code>NEG DO, SO</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b11000</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>SO</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orge61c56d" class="outline-4">
<h4 id="orge61c56d"><span class="section-number-4">3.4.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-4-2">
<pre class="example">
if (instruction[20] == 0)
  value = MemW[addr20];
else
  value = SO;

DO = -value;

Set_Flags(DO);
</pre>
</div>
</div>

<div id="outline-container-org6ab7c36" class="outline-4">
<h4 id="org6ab7c36"><span class="section-number-4">3.4.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-4-3">
<p>
<code>ZF</code>, <code>PF</code>, <code>NF</code>
</p>
</div>
</div>
</div>

<div id="outline-container-orga6dc16f" class="outline-3">
<h3 id="orga6dc16f"><span class="section-number-3">3.5</span> CMP</h3>
<div class="outline-text-3" id="text-3-5">
<p>
Compares two operands.
</p>

<p>
The comparison is perdformed by subtracting the second source operand
from the first source operand and setting the flags according to the
result. The result is discarded.
</p>
</div>

<div id="outline-container-orge902122" class="outline-4">
<h4 id="orge902122"><span class="section-number-4">3.5.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-5-1">
<table>
<caption class="t-above"><span class="table-number">Table 19:</span> <code>CMP SO1, SO2</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-22</th>
<th scope="col" class="org-right">21-17</th>
<th scope="col" class="org-right">16</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b11100</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>SO1</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>SO2</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 20:</span> <code>CMP SO1, imm16</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-22</th>
<th scope="col" class="org-right">21-17</th>
<th scope="col" class="org-right">16</th>
<th scope="col" class="org-right">15-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b11100</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>SO1</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right"><code>imm16</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org025121c" class="outline-4">
<h4 id="org025121c"><span class="section-number-4">3.5.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-5-2">
<pre class="example">
if (instruction[16] == 0)
  result = SO1 - SO2;
else
  result = SO1 - SExtend(imm16, 32);

Set_Flags(result);
</pre>
</div>
</div>

<div id="outline-container-org9ef4bb6" class="outline-4">
<h4 id="org9ef4bb6"><span class="section-number-4">3.5.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-5-3">
<p>
<code>ZF</code>, <code>PF</code>, <code>NF</code>
</p>
</div>
</div>
</div>

<div id="outline-container-orgd1f456e" class="outline-3">
<h3 id="orgd1f456e"><span class="section-number-3">3.6</span> AND</h3>
<div class="outline-text-3" id="text-3-6">
<p>
Performs bitwise logical AND of two source operands and stores the
result in the destination operand.
</p>
</div>

<div id="outline-container-orgb50eeb6" class="outline-4">
<h4 id="orgb50eeb6"><span class="section-number-4">3.6.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-6-1">
<table>
<caption class="t-above"><span class="table-number">Table 21:</span> <code>AND DO, SO1, SO2</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-22</th>
<th scope="col" class="org-right">21-17</th>
<th scope="col" class="org-right">16</th>
<th scope="col" class="org-right">15-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b00101</code></td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>SO1</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>SO2</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 22:</span> <code>AND DO, SO1, imm16</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-22</th>
<th scope="col" class="org-right">21-17</th>
<th scope="col" class="org-right">16</th>
<th scope="col" class="org-right">15-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b00101</code></td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>SO1</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right"><code>imm16</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org128f655" class="outline-4">
<h4 id="org128f655"><span class="section-number-4">3.6.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-6-2">
<pre class="example">
if (instruction[16] == 0)
  DO = SO1 &amp;&amp; SO2
else
  DO = SO1 &amp;&amp; SExtend(imm16, 32)

Set_Flags(DO);
</pre>
</div>
</div>

<div id="outline-container-org014323f" class="outline-4">
<h4 id="org014323f"><span class="section-number-4">3.6.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-6-3">
<p>
<code>ZF</code>, <code>PF</code>, <code>NF</code>
</p>
</div>
</div>
</div>

<div id="outline-container-org72c3231" class="outline-3">
<h3 id="org72c3231"><span class="section-number-3">3.7</span> OR</h3>
<div class="outline-text-3" id="text-3-7">
<p>
Performs bitwise logical OR of two source operands and stores the
result in the destination operand.
</p>
</div>

<div id="outline-container-org0f898b8" class="outline-4">
<h4 id="org0f898b8"><span class="section-number-4">3.7.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-7-1">
<table>
<caption class="t-above"><span class="table-number">Table 23:</span> <code>OR DO, SO1, SO2</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-22</th>
<th scope="col" class="org-right">21-17</th>
<th scope="col" class="org-right">16</th>
<th scope="col" class="org-right">15-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b01101</code></td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>SO1</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>SO2</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 24:</span> <code>OR DO, SO1, imm16</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-22</th>
<th scope="col" class="org-right">21-17</th>
<th scope="col" class="org-right">16</th>
<th scope="col" class="org-right">15-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b01101</code></td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>SO1</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right"><code>imm16</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org89920e7" class="outline-4">
<h4 id="org89920e7"><span class="section-number-4">3.7.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-7-2">
<pre class="example">
if (instruction[16] == 0)
  DO = SO1 || SO2
else
  DO = SO1 || SExtend(imm16, 32)

Set_Flags(DO);
</pre>
</div>
</div>

<div id="outline-container-org435f59c" class="outline-4">
<h4 id="org435f59c"><span class="section-number-4">3.7.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-7-3">
<p>
<code>ZF</code>, <code>PF</code>, <code>NF</code>
</p>
</div>
</div>
</div>

<div id="outline-container-org4661fac" class="outline-3">
<h3 id="org4661fac"><span class="section-number-3">3.8</span> NOT</h3>
<div class="outline-text-3" id="text-3-8">
<p>
Bitwise complement.
</p>

<p>
Perform a bitwise complement of the source operand and store the
result into the destination operand.
</p>
</div>

<div id="outline-container-org93a0d39" class="outline-4">
<h4 id="org93a0d39"><span class="section-number-4">3.8.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-8-1">
<table>
<caption class="t-above"><span class="table-number">Table 25:</span> <code>NOT DO, addr20</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b10110</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>addr20</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 26:</span> <code>NOT DO, SO</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b10110</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>SO</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgee5f4ff" class="outline-4">
<h4 id="orgee5f4ff"><span class="section-number-4">3.8.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-8-2">
<pre class="example">
if (instruction[20] == 0)
  value = MemW[addr20];
else
  value = SO;

DO = ~value;

Set_Flags(DO);
</pre>
</div>
</div>

<div id="outline-container-org8761df8" class="outline-4">
<h4 id="org8761df8"><span class="section-number-4">3.8.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-8-3">
<p>
<code>ZF</code>, <code>PF</code>, <code>NF</code>
</p>
</div>
</div>
</div>

<div id="outline-container-org716eedc" class="outline-3">
<h3 id="org716eedc"><span class="section-number-3">3.9</span> XOR</h3>
<div class="outline-text-3" id="text-3-9">
<p>
Bitwise exclusive-OR.
</p>
</div>

<div id="outline-container-org29fa28f" class="outline-4">
<h4 id="org29fa28f"><span class="section-number-4">3.9.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-9-1">
<table>
<caption class="t-above"><span class="table-number">Table 27:</span> <code>XOR DO, SO1, SO2</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-22</th>
<th scope="col" class="org-right">21-17</th>
<th scope="col" class="org-right">16</th>
<th scope="col" class="org-right">15-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b10101</code></td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>SO1</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>SO2</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 28:</span> <code>XOR DO, SO1, imm16</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-22</th>
<th scope="col" class="org-right">21-17</th>
<th scope="col" class="org-right">16</th>
<th scope="col" class="org-right">15-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b10101</code></td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>SO1</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right"><code>imm16</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgf348816" class="outline-4">
<h4 id="orgf348816"><span class="section-number-4">3.9.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-9-2">
<pre class="example">
if (instruction[16] == 0)
  DO = SO1 ^ SO2
else
  DO = SO1 ^ SExtend(imm16, 32)

Set_Flags(DO);
</pre>
</div>
</div>

<div id="outline-container-org9556096" class="outline-4">
<h4 id="org9556096"><span class="section-number-4">3.9.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-9-3">
<p>
<code>ZF</code>, <code>PF</code>, <code>NF</code>
</p>
</div>
</div>
</div>

<div id="outline-container-org6d7d6d9" class="outline-3">
<h3 id="org6d7d6d9"><span class="section-number-3">3.10</span> SHF</h3>
<div class="outline-text-3" id="text-3-10">
<p>
Bit shift.
</p>

<p>
Shift the source operand by a specified number of bits to the left or
right and store the result in the destination operand.
</p>

<p>
The left shift operation (<code>SHFL</code>) fills the vacated bit positions with
zeroes. The right shift operation can be logical or arithmetic. The
logical right shift operation (<code>SHFRL</code>) fills the vacated bit
positions with zeroes while the arithmetic right shift operation
(<code>SHFRA</code>) fills the vacated bit positions by the most significant bit.
</p>
</div>

<div id="outline-container-org13b5a4d" class="outline-4">
<h4 id="org13b5a4d"><span class="section-number-4">3.10.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-10-1">
<table>
<caption class="t-above"><span class="table-number">Table 29:</span> <code>SHFL DO, SO, imm5</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-25</th>
<th scope="col" class="org-right">24-15</th>
<th scope="col" class="org-right">14-10</th>
<th scope="col" class="org-right">9-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b10000</code></td>
<td class="org-right"><code>0b00</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>SO</code></td>
<td class="org-right"><code>imm5</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 30:</span> <code>SHFRL DO, SO, imm5</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-25</th>
<th scope="col" class="org-right">24-15</th>
<th scope="col" class="org-right">14-10</th>
<th scope="col" class="org-right">9-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b10000</code></td>
<td class="org-right"><code>0b10</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>SO</code></td>
<td class="org-right"><code>imm5</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 31:</span> <code>SHFRA DO, SO, imm5</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-25</th>
<th scope="col" class="org-right">24-15</th>
<th scope="col" class="org-right">14-10</th>
<th scope="col" class="org-right">9-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b10000</code></td>
<td class="org-right"><code>0b11</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>SO</code></td>
<td class="org-right"><code>imm5</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org38e584a" class="outline-4">
<h4 id="org38e584a"><span class="section-number-4">3.10.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-10-2">
<pre class="example">
if (instruction[26:25] == 0)
  DO = LShift(SO, imm5);
else if (instruction[26:25] == 2)
  DO = RShift(SO, imm5);
else if (instruction[26:25] == 3)
  DO = RAShift(SO, imm5);

Set_Flags(DO);
</pre>
</div>
</div>

<div id="outline-container-orgd84f16c" class="outline-4">
<h4 id="orgd84f16c"><span class="section-number-4">3.10.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-10-3">
<p>
<code>ZF</code>, <code>PF</code>, <code>NF</code>
</p>
</div>
</div>
</div>

<div id="outline-container-org080f87e" class="outline-3">
<h3 id="org080f87e"><span class="section-number-3">3.11</span> JC</h3>
<div class="outline-text-3" id="text-3-11">
<p>
Jump conditionally. Tests zero or more flags and performs a jump if
any of them are set.
</p>

<p>
Note that <code>JCnzp</code> will always perform a jump regardless of the state of
the flags and <code>JC</code> will never perform the jump. For this reason, it is
not necessary for assemblers to support these instruction variants.
</p>

<p>
It is an error if the target address of the jump is not word aligned.
</p>
</div>

<div id="outline-container-org2f8bf5c" class="outline-4">
<h4 id="org2f8bf5c"><span class="section-number-4">3.11.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-11-1">
<ul class="org-ul">
<li><code>JCn   addr20</code></li>
<li><code>JCp   addr20</code></li>
<li><code>JCz   addr20</code></li>
<li><code>JCnp  addr20</code></li>
<li><code>JCnz  addr20</code></li>
<li><code>JCzp  addr20</code></li>
<li><code>JCnzp addr20</code></li>
</ul>

<table>
<caption class="t-above"><span class="table-number">Table 32:</span> <code>JC addr20</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25</th>
<th scope="col" class="org-right">24</th>
<th scope="col" class="org-right">23-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b10111</code></td>
<td class="org-right"><code>n</code></td>
<td class="org-right"><code>p</code></td>
<td class="org-right"><code>z</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>addr20</code></td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li><code>JCn   SR</code></li>
<li><code>JCp   SR</code></li>
<li><code>JCz   SR</code></li>
<li><code>JCnp  SR</code></li>
<li><code>JCnz  SR</code></li>
<li><code>JCzp  SR</code></li>
<li><code>JCnzp SR</code></li>
</ul>

<table>
<caption class="t-above"><span class="table-number">Table 33:</span> <code>JC [SR]</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25</th>
<th scope="col" class="org-right">24</th>
<th scope="col" class="org-right">23-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-4</th>
<th scope="col" class="org-right">3-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b10111</code></td>
<td class="org-right"><code>n</code></td>
<td class="org-right"><code>p</code></td>
<td class="org-right"><code>z</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>[SR]</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org934a9c4" class="outline-4">
<h4 id="org934a9c4"><span class="section-number-4">3.11.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-11-2">
<pre class="example">
if ((n &amp;&amp; NF) || (p &amp;&amp; PF) || (z &amp;&amp; ZF)) {
  if (instruction[20] == 0)
    addr = addr20;
  else
    addr = SR[19:0];

  if ((addr % 4) != 0)
    Handle alignment error;
  else
    PC = addr;
}
</pre>
</div>
</div>

<div id="outline-container-org9fe7d43" class="outline-4">
<h4 id="org9fe7d43"><span class="section-number-4">3.11.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-11-3">
<p>
None.
</p>
</div>
</div>
</div>

<div id="outline-container-org2e07f6f" class="outline-3">
<h3 id="org2e07f6f"><span class="section-number-3">3.12</span> JMP</h3>
<div class="outline-text-3" id="text-3-12">
<p>
Jump unconditionally.
</p>

<p>
Note that this instruction uses the same opcode as <a href="#org080f87e">JC</a> and the encoding
is the same as <code>JCnzp</code>.
</p>

<p>
It is an error if the target address of the jump is not word aligned.
</p>
</div>

<div id="outline-container-org4e53be3" class="outline-4">
<h4 id="org4e53be3"><span class="section-number-4">3.12.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-12-1">
<table>
<caption class="t-above"><span class="table-number">Table 34:</span> <code>JMP addr20</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-24</th>
<th scope="col" class="org-right">23-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b10111</code></td>
<td class="org-right"><code>0b111</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>addr20</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 35:</span> <code>JMP [SR]</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-24</th>
<th scope="col" class="org-right">23-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-4</th>
<th scope="col" class="org-right">3-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b10111</code></td>
<td class="org-right"><code>0b111</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>[SR]</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org91fcd4c" class="outline-4">
<h4 id="org91fcd4c"><span class="section-number-4">3.12.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-12-2">
<pre class="example">
if (instruction[20] == 0)
  addr = addr20;
else
  addr = SR[19:0];

if ((addr % 4) != 0)
  Handle alignment error;
else
  PC = addr;
</pre>
</div>
</div>

<div id="outline-container-orgaaca8d8" class="outline-4">
<h4 id="orgaaca8d8"><span class="section-number-4">3.12.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-12-3">
<p>
None.
</p>
</div>
</div>
</div>

<div id="outline-container-org53c2179" class="outline-3">
<h3 id="org53c2179"><span class="section-number-3">3.13</span> CALL</h3>
<div class="outline-text-3" id="text-3-13">
<p>
Call subroutine.
</p>

<p>
Saves return information on the stack and branches to the called
subroutine.
</p>

<p>
It is an error if the address of the subroutine is not word aligned.
</p>
</div>

<div id="outline-container-org9b9f7ab" class="outline-4">
<h4 id="org9b9f7ab"><span class="section-number-4">3.13.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-13-1">
<table>
<caption class="t-above"><span class="table-number">Table 36:</span> <code>CALL addr20</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b01000</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>addr20</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 37:</span> <code>CALL [SR]</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-4</th>
<th scope="col" class="org-right">3-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b01000</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>[SR]</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orge9ed4e9" class="outline-4">
<h4 id="orge9ed4e9"><span class="section-number-4">3.13.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-13-2">
<pre class="example">
R15 = R15 - 4;
MemW[R15] = ZExtend(PC, 32);
if (instruction[20] == 0)
  addr = addr20;
else
  addr = SR[19:0];

if ((addr % 4) != 0)
  Handle alignment error;
else
  PC = addr;
</pre>
</div>
</div>

<div id="outline-container-org67d8bbc" class="outline-4">
<h4 id="org67d8bbc"><span class="section-number-4">3.13.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-13-3">
<p>
None.
</p>
</div>
</div>
</div>

<div id="outline-container-org961ea00" class="outline-3">
<h3 id="org961ea00"><span class="section-number-3">3.14</span> SCL</h3>
<div class="outline-text-3" id="text-3-14">
<p>
Call operating system service.
</p>

<p>
Saves return information on the stack and branches to a system call
handler routine.
</p>

<p>
It is an error if the address of the system call handler routine is
not word aligned.
</p>
</div>

<div id="outline-container-orgf52e6d3" class="outline-4">
<h4 id="orgf52e6d3"><span class="section-number-4">3.14.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-14-1">
<table>
<caption class="t-above"><span class="table-number">Table 38:</span> <code>SCL imm5</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b01000</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>imm5</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgc2f4313" class="outline-4">
<h4 id="orgc2f4313"><span class="section-number-4">3.14.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-14-2">
<pre class="example">
if (SCT[imm5][31] == 0)
  Handle SCT disabled error;
else {
  temp = R15;
  R15 = ZExtend(SSP, 32);
  R15 = R15 - 4;
  MemW[R15] = temp;
  R15 = R15 - 4;
  MemW[R15] = MS;
  R15 = R15 - 4;
  MemW[R15] = ZExtend(PC, 32);
  MI = 1;

  addr = SCT[imm5][19:0];
  if ((addr % 4) != 0)
    Handle alignment error;
  else
    PC = addr;
}
</pre>
</div>
</div>

<div id="outline-container-org0530bf2" class="outline-4">
<h4 id="org0530bf2"><span class="section-number-4">3.14.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-14-3">
<p>
<code>MI</code>
</p>
</div>
</div>
</div>

<div id="outline-container-org6e98e8f" class="outline-3">
<h3 id="org6e98e8f"><span class="section-number-3">3.15</span> RET</h3>
<div class="outline-text-3" id="text-3-15">
<p>
Return from a subroutine, interrupt handler routine, or a system call
handler routine.
</p>

<p>
Restores the return information from the stack and branches to the
caller or savepoint.
</p>

<p>
It is an error if the target address of the return is not word aligned.
</p>
</div>

<div id="outline-container-org7a6c7c7" class="outline-4">
<h4 id="org7a6c7c7"><span class="section-number-4">3.15.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-15-1">
<table>
<caption class="t-above"><span class="table-number">Table 39:</span> <code>RET</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b00011</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right">Reserved</td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 40:</span> <code>RETI</code> or <code>RETS</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b00011</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org8e0615f" class="outline-4">
<h4 id="org8e0615f"><span class="section-number-4">3.15.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-15-2">
<pre class="example">
if (instruction[26] == 1 &amp;&amp; MI == 0)
  Handle privilege violation error;

addr = MemW[R15][19:0];
R15 = R15 + 4;

if ((addr % 4) != 0)
  Handle alignment error;
else {
  PC = addr;

  if (instruction[26] == 1) {
    MS = MemW[R15];
    R15 = R15 + 4;
    if (MI == 0) {
      R15 = MemW[R15];
    }
  }
}
</pre>
</div>
</div>

<div id="outline-container-org2448076" class="outline-4">
<h4 id="org2448076"><span class="section-number-4">3.15.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-15-3">
<p>
<code>ZF</code>, <code>PF</code>, <code>NF</code>, <code>MI</code>
</p>
</div>
</div>
</div>

<div id="outline-container-orga8e91ea" class="outline-3">
<h3 id="orga8e91ea"><span class="section-number-3">3.16</span> LD</h3>
<div class="outline-text-3" id="text-3-16">
<p>
Load a byte, short, or word from memory to a register.
</p>

<p>
The source operand specifies a memory address. The contents of this
address is optionally sign extended and stored into the destination
register.
</p>
</div>

<div id="outline-container-orgee8cb84" class="outline-4">
<h4 id="orgee8cb84"><span class="section-number-4">3.16.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-16-1">
<table>
<caption class="t-above"><span class="table-number">Table 41:</span> <code>LDB DR, addr20</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-25</th>
<th scope="col" class="org-right">24-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b01001</code></td>
<td class="org-right"><code>0b01</code></td>
<td class="org-right"><code>DR</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>addr20</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 42:</span> <code>LDB DR, [SR]</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-25</th>
<th scope="col" class="org-right">24-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-4</th>
<th scope="col" class="org-right">3-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b01001</code></td>
<td class="org-right"><code>0b01</code></td>
<td class="org-right"><code>DR</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>SR</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 43:</span> <code>LDS DR, addr20</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-25</th>
<th scope="col" class="org-right">24-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b01001</code></td>
<td class="org-right"><code>0b10</code></td>
<td class="org-right"><code>DR</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>addr20</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 44:</span> <code>LDS DR, [SR]</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-25</th>
<th scope="col" class="org-right">24-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-4</th>
<th scope="col" class="org-right">3-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b01001</code></td>
<td class="org-right"><code>0b10</code></td>
<td class="org-right"><code>DR</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>SR</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 45:</span> <code>LDW DR, addr20</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-25</th>
<th scope="col" class="org-right">24-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b01001</code></td>
<td class="org-right"><code>0b11</code></td>
<td class="org-right"><code>DR</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>addr20</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 46:</span> <code>LDW DR, [SR]</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-25</th>
<th scope="col" class="org-right">24-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-4</th>
<th scope="col" class="org-right">3-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b01001</code></td>
<td class="org-right"><code>0b11</code></td>
<td class="org-right"><code>DR</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>SR</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org609a8fa" class="outline-4">
<h4 id="org609a8fa"><span class="section-number-4">3.16.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-16-2">
<pre class="example">
if (instruction[20] == 0)
  addr = addr20;
else
  addr = SR[19:0];

if (instruction[26:25] == 1)
  DR = SExtend(MemB[addr], 32);
else if (instruction[26:25] == 2)
  DR = SExtend(MemS[addr], 32);
else if (instruction[26:25] == 3)
  DR = MemW[addr];

Set_Flags(DR);
</pre>
</div>
</div>

<div id="outline-container-orgcb51ce3" class="outline-4">
<h4 id="orgcb51ce3"><span class="section-number-4">3.16.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-16-3">
<p>
<code>ZF</code>, <code>PF</code>, <code>NF</code>
</p>
</div>
</div>
</div>

<div id="outline-container-orga98a2c7" class="outline-3">
<h3 id="orga98a2c7"><span class="section-number-3">3.17</span> ST</h3>
<div class="outline-text-3" id="text-3-17">
<p>
Store a byte, short, or word from a register to memory.
</p>

<p>
The destination operand specifies a memory address. The least
significant 8, 16, or 32 bits of the source register are selected
depending on whether the variant of the instruction is <code>STB</code>, <code>STS</code>,
or <code>STW</code> respectively. This selected bits are stored into the
destination address.
</p>
</div>

<div id="outline-container-org194ea34" class="outline-4">
<h4 id="org194ea34"><span class="section-number-4">3.17.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-17-1">
<table>
<caption class="t-above"><span class="table-number">Table 47:</span> <code>STB addr20, SR</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-25</th>
<th scope="col" class="org-right">24</th>
<th scope="col" class="org-right">23-4</th>
<th scope="col" class="org-right">3-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b00001</code></td>
<td class="org-right"><code>0b01</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>addr20</code></td>
<td class="org-right"><code>SR</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 48:</span> <code>STB [DR], SR</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-25</th>
<th scope="col" class="org-right">24</th>
<th scope="col" class="org-right">23-8</th>
<th scope="col" class="org-right">7-4</th>
<th scope="col" class="org-right">3-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b00001</code></td>
<td class="org-right"><code>0b01</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DR</code></td>
<td class="org-right"><code>SR</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 49:</span> <code>STS addr20, SR</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-25</th>
<th scope="col" class="org-right">24</th>
<th scope="col" class="org-right">23-4</th>
<th scope="col" class="org-right">3-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b00001</code></td>
<td class="org-right"><code>0b10</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>addr20</code></td>
<td class="org-right"><code>SR</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 50:</span> <code>STS [DR], SR</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-25</th>
<th scope="col" class="org-right">24</th>
<th scope="col" class="org-right">23-8</th>
<th scope="col" class="org-right">7-4</th>
<th scope="col" class="org-right">3-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b00001</code></td>
<td class="org-right"><code>0b10</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DR</code></td>
<td class="org-right"><code>SR</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 51:</span> <code>STW addr20, SR</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-25</th>
<th scope="col" class="org-right">24</th>
<th scope="col" class="org-right">23-4</th>
<th scope="col" class="org-right">3-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b00001</code></td>
<td class="org-right"><code>0b11</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>addr20</code></td>
<td class="org-right"><code>SR</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 52:</span> <code>STW [DR], SR</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-25</th>
<th scope="col" class="org-right">24</th>
<th scope="col" class="org-right">23-8</th>
<th scope="col" class="org-right">7-4</th>
<th scope="col" class="org-right">3-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b00001</code></td>
<td class="org-right"><code>0b11</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DR</code></td>
<td class="org-right"><code>SR</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org914aef5" class="outline-4">
<h4 id="org914aef5"><span class="section-number-4">3.17.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-17-2">
<pre class="example">
if (instruction[24] == 0)
  addr = addr20;
else
  addr = DR[19:0];

if (instruction[26:25] == 1)
  MemB[addr] = SR[7:0];
else if (instruction[26:25] == 2)
  MemS[addr] = SR[15:0];
else if (instruction[26:25] == 3)
  MemW[addr] = SR;
</pre>
</div>
</div>

<div id="outline-container-org44a1f84" class="outline-4">
<h4 id="org44a1f84"><span class="section-number-4">3.17.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-17-3">
<p>
None.
</p>
</div>
</div>
</div>

<div id="outline-container-org9356010" class="outline-3">
<h3 id="org9356010"><span class="section-number-3">3.18</span> CPY</h3>
<div class="outline-text-3" id="text-3-18">
<p>
Copy a source register or immediate value to the destination register.
</p>

<p>
The copy instruction has two variants in case of an immediate
operand. The value is either sign extended to 32 bits and copied
(CPYI) or zero extended to 32 bits and copied (CPYU).
</p>
</div>

<div id="outline-container-org59c913b" class="outline-4">
<h4 id="org59c913b"><span class="section-number-4">3.18.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-18-1">
<table>
<caption class="t-above"><span class="table-number">Table 53:</span> <code>CPYI DR, imm16</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-22</th>
<th scope="col" class="org-right">21-17</th>
<th scope="col" class="org-right">17-16</th>
<th scope="col" class="org-right">15-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b00010</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DR</code></td>
<td class="org-right"><code>0b00</code></td>
<td class="org-right"><code>imm16</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 54:</span> <code>CPYU DR, imm16</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-22</th>
<th scope="col" class="org-right">21-17</th>
<th scope="col" class="org-right">17-16</th>
<th scope="col" class="org-right">15-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b00010</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DR</code></td>
<td class="org-right"><code>0b01</code></td>
<td class="org-right"><code>imm16</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 55:</span> <code>CPY DR, SR</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-22</th>
<th scope="col" class="org-right">21-17</th>
<th scope="col" class="org-right">17-16</th>
<th scope="col" class="org-right">15-4</th>
<th scope="col" class="org-right">3-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b00010</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DR</code></td>
<td class="org-right"><code>0b10</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>SR</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgdfaa1d9" class="outline-4">
<h4 id="orgdfaa1d9"><span class="section-number-4">3.18.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-18-2">
<pre class="example">
if (instruction[17:16] == 0)
  DR = SExtend(imm16, 32);
else if (instruction[17:16] == 1)
  DR = ZExtend(imm16, 32);
else if (instruction[17:16] == 2)
  DR = SR;
</pre>
</div>
</div>

<div id="outline-container-org7103822" class="outline-4">
<h4 id="org7103822"><span class="section-number-4">3.18.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-18-3">
<p>
None.
</p>
</div>
</div>
</div>

<div id="outline-container-orgef010e0" class="outline-3">
<h3 id="orgef010e0"><span class="section-number-3">3.19</span> PUSH</h3>
<div class="outline-text-3" id="text-3-19">
<p>
Push the source operand on top of the stack.
</p>

<p>
The stack pointer (R15) is decremented by 4 and the source operand is
stored at that memory location.
</p>

<p>
There are two variants of the instruction when the source operand is a
16 bit immediate value. The value is either sign extended to 32 bits
and copied (PUSHI) or zero extended to 32 bits and copied (PUSHU).
</p>

<p>
There are three variants of the instruction when the source operand is
either in <code>addr20</code> or <code>SO</code> form. The value stored in the stack always
have a 32 bit size. The value is sign extended to 32 bits if the
operand is a byte or short.
</p>
</div>

<div id="outline-container-orgb5a3470" class="outline-4">
<h4 id="orgb5a3470"><span class="section-number-4">3.19.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-19-1">
<table>
<caption class="t-above"><span class="table-number">Table 56:</span> <code>PUSHI imm16</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-24</th>
<th scope="col" class="org-right">23-17</th>
<th scope="col" class="org-right">16</th>
<th scope="col" class="org-right">15-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b11111</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>0b00</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>imm16</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 57:</span> <code>PUSHU imm16</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-24</th>
<th scope="col" class="org-right">23-17</th>
<th scope="col" class="org-right">16</th>
<th scope="col" class="org-right">15-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b11111</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>0b00</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>1</code></td>
<td class="org-right"><code>imm16</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 58:</span> <code>PUSHB addr20</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-24</th>
<th scope="col" class="org-right">23-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b11111</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>0b01</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>addr20</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 59:</span> <code>PUSHB SO</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-24</th>
<th scope="col" class="org-right">23-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b11111</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>0b01</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>SO</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 60:</span> <code>PUSHS addr20</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-24</th>
<th scope="col" class="org-right">23-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b11111</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>0b10</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>addr20</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 61:</span> <code>PUSHS SO</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-24</th>
<th scope="col" class="org-right">23-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b11111</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>0b10</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>SO</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 62:</span> <code>PUSHW addr20</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-24</th>
<th scope="col" class="org-right">23-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b11111</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>0b11</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>addr20</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 63:</span> <code>PUSHW SO</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-24</th>
<th scope="col" class="org-right">23-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b11111</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>0b11</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>SO</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org1141b12" class="outline-4">
<h4 id="org1141b12"><span class="section-number-4">3.19.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-19-2">
<pre class="example">
R15 = R15 - 4;

if (instruction[25:24] == 0) {
  if (instruction[16] == 0)
    MemW[R15] = SExtend(imm16, 32);
  else
    MemW[R15] = ZExtend(imm16, 32);
} else if (instruction[25:24] == 1) {
  if (instruction[20] == 0)
    MemW[R15] = SExtend(MemB[addr20], 32);
  else
    MemW[R15] = SExtend(SO[7:0], 32); 
} else if (instruction[25:24] == 2) {
  if (instruction[20] == 0)
    MemW[R15] = SExtend(MemS[addr20], 32);
  else
    MemW[R15] = SExtend(SO[15:0], 32); 
} else if (instruction[25:24] == 3) {
  if (instruction[20] == 0)
    MemW[R15] = MemW[addr20];
  else
    MemW[R15] = SO;
}
</pre>
</div>
</div>

<div id="outline-container-org86a4df0" class="outline-4">
<h4 id="org86a4df0"><span class="section-number-4">3.19.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-19-3">
<p>
None.
</p>
</div>
</div>
</div>

<div id="outline-container-org01c0feb" class="outline-3">
<h3 id="org01c0feb"><span class="section-number-3">3.20</span> POP</h3>
<div class="outline-text-3" id="text-3-20">
<p>
Pop the value on the top of the stack to the destination operand.
</p>

<p>
The 32 bit value stored at the address specified by the stack pointer
(R15) is extracted and stored in the destination operand. The stack
pointer is incremented by 4 after that.
</p>

<p>
There are three variants of the instruction - POPB, POPS, and
POPW. The POPB variant stores the least significant 8 bits in the
destination operand. The POPW variant stores the least significant 16
bits in the destination operand. The POPW variant stores the entire
word in the destination operand.
</p>
</div>

<div id="outline-container-orgc5c51af" class="outline-4">
<h4 id="orgc5c51af"><span class="section-number-4">3.20.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-20-1">
<table>
<caption class="t-above"><span class="table-number">Table 64:</span> <code>POPB addr20</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-24</th>
<th scope="col" class="org-right">23-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b11111</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right"><code>0b01</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>addr20</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 65:</span> <code>POPB DO</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-24</th>
<th scope="col" class="org-right">23-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b11111</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right"><code>0b01</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DO</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 66:</span> <code>POPS addr20</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-24</th>
<th scope="col" class="org-right">23-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b11111</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right"><code>0b10</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>addr20</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 67:</span> <code>POPS DO</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-24</th>
<th scope="col" class="org-right">23-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b11111</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right"><code>0b10</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DO</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 68:</span> <code>POPW addr20</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-24</th>
<th scope="col" class="org-right">23-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b11111</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right"><code>0b11</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>addr20</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 69:</span> <code>POPW DO</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-24</th>
<th scope="col" class="org-right">23-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b11111</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right"><code>0b11</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DO</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org7e3d6ba" class="outline-4">
<h4 id="org7e3d6ba"><span class="section-number-4">3.20.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-20-2">
<pre class="example">
if (instruction[25:24] == 1) {
  if (instruction[20] == 0)
    MemB[addr20] = MemB[R15];
  else
    DO[7:0] = MemB[R15];
} else if (instruction[25:24] == 2) {
  if (instruction[20] == 0)
    MemS[addr20] = MemS[R15];
  else
    DO[15:0] = MemS[R15];
} else if (instruction[25:24] == 3) {
  if (instruction[20] == 0)
    MemW[addr20] = MemW[R15];
  else
    DO = MemW[R15];
}

R15 = R15 + 4;
</pre>
</div>
</div>

<div id="outline-container-org25819c0" class="outline-4">
<h4 id="org25819c0"><span class="section-number-4">3.20.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-20-3">
<p>
None.
</p>
</div>
</div>
</div>

<div id="outline-container-orgaccaf4a" class="outline-3">
<h3 id="orgaccaf4a"><span class="section-number-3">3.21</span> IN</h3>
<div class="outline-text-3" id="text-3-21">
<p>
Get input from an I/O port.
</p>

<p>
Extract a word from the I/O port whose number is specified as a source
or immediate operand and store it into the destination operand.
</p>

<p>
This is a privileged instruction and can only be executed in
supervisor mode.
</p>
</div>

<div id="outline-container-org8b861e0" class="outline-4">
<h4 id="org8b861e0"><span class="section-number-4">3.21.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-21-1">
<table>
<caption class="t-above"><span class="table-number">Table 70:</span> <code>IN DO, imm5</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-11</th>
<th scope="col" class="org-right">10-6</th>
<th scope="col" class="org-right">5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b01110</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>imm5</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 71:</span> <code>IN DO, SO</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-11</th>
<th scope="col" class="org-right">10-6</th>
<th scope="col" class="org-right">5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b01110</code></td>
<td class="org-right"><code>0</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right"><code>SO</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org930e855" class="outline-4">
<h4 id="org930e855"><span class="section-number-4">3.21.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-21-2">
<pre class="example">
if (MI == 0)
  Handle privilege violation error;

if (instruction[5] == 0)
  p = imm5;
else
  p = SO[4:0];

DO = Port[p];

Set_Flags(DO);
</pre>
</div>
</div>

<div id="outline-container-orge35208f" class="outline-4">
<h4 id="orge35208f"><span class="section-number-4">3.21.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-21-3">
<p>
<code>ZF</code>, <code>PF</code>, <code>NF</code>
</p>
</div>
</div>
</div>

<div id="outline-container-orgba169d5" class="outline-3">
<h3 id="orgba169d5"><span class="section-number-3">3.22</span> OUT</h3>
<div class="outline-text-3" id="text-3-22">
<p>
Otput to an I/O port.
</p>

<p>
Copy a word from the source operand to an I/O port. The number of the
port is mentioned as a destination or immediate operand.
</p>

<p>
This is a privileged instruction and can only be executed in
supervisor mode.
</p>
</div>

<div id="outline-container-org4d98a7c" class="outline-4">
<h4 id="org4d98a7c"><span class="section-number-4">3.22.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-22-1">
<table>
<caption class="t-above"><span class="table-number">Table 72:</span> <code>OUT imm5, SO</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-11</th>
<th scope="col" class="org-right">10</th>
<th scope="col" class="org-right">9-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b01110</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>imm5</code></td>
<td class="org-right"><code>SO</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 73:</span> <code>OUT DO, SO</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26</th>
<th scope="col" class="org-right">25-11</th>
<th scope="col" class="org-right">10</th>
<th scope="col" class="org-right">9-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b01110</code></td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>1</code></td>
<td class="org-right"><code>DO</code></td>
<td class="org-right"><code>SO</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org55f779e" class="outline-4">
<h4 id="org55f779e"><span class="section-number-4">3.22.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-22-2">
<pre class="example">
if (MI == 0)
  Handle privilege violation error;

if (instruction[10] == 0)
  p = imm5;
else
  p = DO[4:0];

Port[p] = SO;
</pre>
</div>
</div>

<div id="outline-container-org207880e" class="outline-4">
<h4 id="org207880e"><span class="section-number-4">3.22.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-22-3">
<p>
None.
</p>
</div>
</div>
</div>

<div id="outline-container-org538f9c3" class="outline-3">
<h3 id="org538f9c3"><span class="section-number-3">3.23</span> SSSP</h3>
<div class="outline-text-3" id="text-3-23">
<p>
Set supervisor stack pointer register.
</p>

<p>
This is a privileged instruction and can only be executed in
supervisor mode.
</p>

<p>
The value loaded to SSP register must be aligned on a word boundary.
</p>
</div>

<div id="outline-container-org85f1572" class="outline-4">
<h4 id="org85f1572"><span class="section-number-4">3.23.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-23-1">
<table>
<caption class="t-above"><span class="table-number">Table 74:</span> <code>SSSP addr20</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b00110</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>addr20</code></td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 75:</span> <code>SSSP SO</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-5</th>
<th scope="col" class="org-right">4-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b00110</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>1</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>SO</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgfeeb03c" class="outline-4">
<h4 id="orgfeeb03c"><span class="section-number-4">3.23.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-23-2">
<pre class="example">
if (MI == 0)
  Handle privilege violation error;

if (instruction[20] == 0)
  addr = MemW[addr20][19:0];
else
  addr = SO[19:0];

if ((addr % 4) != 0)
  Handle alignment error;
else
  SSP = addr;
</pre>
</div>
</div>

<div id="outline-container-org7a52254" class="outline-4">
<h4 id="org7a52254"><span class="section-number-4">3.23.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-23-3">
<p>
None.
</p>
</div>
</div>
</div>

<div id="outline-container-orgdff880f" class="outline-3">
<h3 id="orgdff880f"><span class="section-number-3">3.24</span> HALT</h3>
<div class="outline-text-3" id="text-3-24">
<p>
Stop execution and halt the computer.
</p>

<p>
It is implementation-defined if/how the computer can transition out of
the halted state.
</p>

<p>
This is a privileged instruction and can only be executed in
supervisor mode.
</p>
</div>

<div id="outline-container-org8d2b189" class="outline-4">
<h4 id="org8d2b189"><span class="section-number-4">3.24.1</span> Encodings</h4>
<div class="outline-text-4" id="text-3-24-1">
<table>
<caption class="t-above"><span class="table-number">Table 76:</span> <code>SSSP addr20</code></caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-27</th>
<th scope="col" class="org-right">26-21</th>
<th scope="col" class="org-right">20</th>
<th scope="col" class="org-right">19-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><code>0b10001</code></td>
<td class="org-right">Reserved</td>
<td class="org-right"><code>0</code></td>
<td class="org-right"><code>addr20</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgce4a6fa" class="outline-4">
<h4 id="orgce4a6fa"><span class="section-number-4">3.24.2</span> Operation</h4>
<div class="outline-text-4" id="text-3-24-2">
<pre class="example">
if (MI == 0)
  Handle privilege violation error;
else
  Halt the computer;
</pre>
</div>
</div>

<div id="outline-container-orgf199ce7" class="outline-4">
<h4 id="orgf199ce7"><span class="section-number-4">3.24.3</span> Flags Affected</h4>
<div class="outline-text-4" id="text-3-24-3">
<p>
None.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org32901b9" class="outline-2">
<h2 id="org32901b9"><span class="section-number-2">4</span> Standard I/O Devices</h2>
<div class="outline-text-2" id="text-4">
<p>
A Pixie implementation must support the following I/O devices.
</p>

<ul class="org-ul">
<li>Clock</li>
<li>Character Input</li>
<li>Character Output</li>
</ul>
</div>

<div id="outline-container-org7f0538d" class="outline-3">
<h3 id="org7f0538d"><span class="section-number-3">4.1</span> Clock</h3>
<div class="outline-text-3" id="text-4-1">
<p>
The clock device can be used to get the current date and time
according to the Gregorian calendar. The device does not support
updating the date and time. Any additional details related to date and
time - such as the timezone or leap second support - are
implementation-defined.
</p>

<p>
The date and time can be read from I/O ports numbered 4 and 5. The
words read from these ports have the following format:
</p>

<table>
<caption class="t-above"><span class="table-number">Table 77:</span> Date Word (Port 4)</caption>

<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<tbody>
<tr>
<td class="org-left">Bit Position</td>
<td class="org-left">31-25</td>
<td class="org-right">24-20</td>
<td class="org-right">19-16</td>
<td class="org-right">15-0</td>
</tr>

<tr>
<td class="org-left">Description</td>
<td class="org-left">Reserved</td>
<td class="org-right">day</td>
<td class="org-right">month</td>
<td class="org-right">year</td>
</tr>

<tr>
<td class="org-left">Range</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">1-31</td>
<td class="org-right">1-12</td>
<td class="org-right">0-65535</td>
</tr>
</tbody>
</table>

<table>
<caption class="t-above"><span class="table-number">Table 78:</span> Time Word (Port 5)</caption>

<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<tbody>
<tr>
<td class="org-left">Bit Position</td>
<td class="org-left">31-17</td>
<td class="org-right">16-12</td>
<td class="org-right">11-6</td>
<td class="org-right">5-0</td>
</tr>

<tr>
<td class="org-left">Description</td>
<td class="org-left">Reserved</td>
<td class="org-right">hour</td>
<td class="org-right">minute</td>
<td class="org-right">second</td>
</tr>

<tr>
<td class="org-left">Range</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">0-23</td>
<td class="org-right">0-59</td>
<td class="org-right">0-59</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orge871ea4" class="outline-3">
<h3 id="orge871ea4"><span class="section-number-3">4.2</span> Character Input</h3>
<div class="outline-text-3" id="text-4-2">
<p>
This device provides ASCII character inputs. The device raises
interrupt vector 8 when a character is available as input. The
interrupt handler routine can read the character from I/O port
number 8. The word read from this port has the following format.
</p>

<table>
<caption class="t-above"><span class="table-number">Table 79:</span> ASCII Input Word Format (Port 8)</caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31</th>
<th scope="col" class="org-right">30-7</th>
<th scope="col" class="org-right">6-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">AVL</td>
<td class="org-right">Undefined</td>
<td class="org-right">Character Code</td>
</tr>
</tbody>
</table>

<p>
The character code is valid only if the <i>AVL</i> bit is set.
</p>

<p>
After reading the code from the port and before issuing a <a href="#org6e98e8f">RETI</a>
instruction, the interrupt handler routine must write a word with
value zero to port 8. This indicates that the handler is ready to
receive additional interrupts. The device must not raise more
interrupts unless the zero word is written to the port.
</p>
</div>
</div>

<div id="outline-container-org95377ef" class="outline-3">
<h3 id="org95377ef"><span class="section-number-3">4.3</span> Character Output</h3>
<div class="outline-text-3" id="text-4-3">
<p>
This device can output ASCII characters. Character should be written
to I/O port number 12 for output. The word written to this port must
have the following format:
</p>

<table>
<caption class="t-above"><span class="table-number">Table 80:</span> ASCII Output Word Format (Port 12)</caption>

<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bit Position</th>
<th scope="col" class="org-right">31-7</th>
<th scope="col" class="org-right">6-0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">Ignored by device</td>
<td class="org-right">Character Code</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</body>
</html>
